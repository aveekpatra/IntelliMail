{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/aveekpatra/Coding/lumi/src/env.js"],"sourcesContent":["import { createEnv } from \"@t3-oss/env-nextjs\";\nimport { z } from \"zod\";\n\nexport const env = createEnv({\n  /**\n   * Specify your server-side environment variables schema here. This way you can ensure the app\n   * isn't built with invalid env vars.\n   */\n  server: {\n    DATABASE_URL: z.string().url(),\n    NODE_ENV: z\n      .enum([\"development\", \"test\", \"production\"])\n      .default(\"development\"),\n  },\n\n  /**\n   * Specify your client-side environment variables schema here. This way you can ensure the app\n   * isn't built with invalid env vars. To expose them to the client, prefix them with\n   * `NEXT_PUBLIC_`.\n   */\n  client: {\n    // NEXT_PUBLIC_CLIENTVAR: z.string(),\n  },\n\n  /**\n   * You can't destruct `process.env` as a regular object in the Next.js edge runtimes (e.g.\n   * middlewares) or client-side so we need to destruct manually.\n   */\n  runtimeEnv: {\n    DATABASE_URL: process.env.DATABASE_URL,\n    NODE_ENV: process.env.NODE_ENV,\n    // NEXT_PUBLIC_CLIENTVAR: process.env.NEXT_PUBLIC_CLIENTVAR,\n  },\n  /**\n   * Run `build` or `dev` with `SKIP_ENV_VALIDATION` to skip env validation. This is especially\n   * useful for Docker builds.\n   */\n  skipValidation: !!process.env.SKIP_ENV_VALIDATION,\n  /**\n   * Makes it so that empty strings are treated as undefined. `SOME_VAR: z.string()` and\n   * `SOME_VAR=''` will throw an error.\n   */\n  emptyStringAsUndefined: true,\n});\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,MAAM,MAAM,CAAA,GAAA,+JAAA,CAAA,YAAS,AAAD,EAAE;IAC3B;;;GAGC,GACD,QAAQ;QACN,cAAc,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG;QAC5B,UAAU,sIAAA,CAAA,IAAC,CACR,IAAI,CAAC;YAAC;YAAe;YAAQ;SAAa,EAC1C,OAAO,CAAC;IACb;IAEA;;;;GAIC,GACD,QAAQ;IAER;IAEA;;;GAGC,GACD,YAAY;QACV,cAAc,QAAQ,GAAG,CAAC,YAAY;QACtC,QAAQ;IAEV;IACA;;;GAGC,GACD,gBAAgB,CAAC,CAAC,QAAQ,GAAG,CAAC,mBAAmB;IACjD;;;GAGC,GACD,wBAAwB;AAC1B","debugId":null}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///Users/aveekpatra/Coding/lumi/src/server/db.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nimport { env } from \"@/env\";\n\nconst createPrismaClient = () =>\n  new PrismaClient({\n    log:\n      env.NODE_ENV === \"development\" ? [\"error\", \"warn\"] : [\"error\"],\n  });\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: ReturnType<typeof createPrismaClient> | undefined;\n};\n\nexport const db = globalForPrisma.prisma ?? createPrismaClient();\n\nif (env.NODE_ENV !== \"production\") globalForPrisma.prisma = db;\n"],"names":[],"mappings":";;;AAAA;AAEA;;;AAEA,MAAM,qBAAqB,IACzB,IAAI,6HAAA,CAAA,eAAY,CAAC;QACf,KACE,4GAAA,CAAA,MAAG,CAAC,QAAQ,KAAK,gBAAgB;YAAC;YAAS;SAAO,GAAG;YAAC;SAAQ;IAClE;AAEF,MAAM,kBAAkB;AAIjB,MAAM,KAAK,gBAAgB,MAAM,IAAI;AAE5C,IAAI,4GAAA,CAAA,MAAG,CAAC,QAAQ,KAAK,cAAc,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///Users/aveekpatra/Coding/lumi/src/app/api/accounts/gmail/status/route.ts"],"sourcesContent":["\"use server\";\n\nimport { db } from \"@/server/db\";\nimport { auth } from \"@clerk/nextjs/server\";\nimport { NextResponse } from \"next/server\";\n\nexport async function GET() {\n  try {\n    // Get the authenticated user - make sure auth() is properly awaited\n    const session = await auth();\n    const userId = session.userId;\n\n    if (!userId) {\n      console.error(\"No user ID found in auth\");\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n    }\n\n    // Get all Gmail accounts for the user\n    const gmailAccounts = await db.account.findMany({\n      where: {\n        userId: userId,\n        provider: \"Gmail\",\n      },\n      select: {\n        id: true,\n        emailAddress: true,\n        name: true,\n        // Remove createdAt since it doesn't exist in the Account model\n      },\n    });\n\n    // Add timestamp instead of using createdAt\n    const accountsWithTimestamp = gmailAccounts.map((acc) => ({\n      ...acc,\n      createdAt: new Date().toISOString(), // Using current time as fallback\n    }));\n\n    console.log(\n      `[GMAIL STATUS] Found ${gmailAccounts.length} Gmail accounts for user ${userId}:`,\n      accountsWithTimestamp.map((acc) => ({\n        email: acc.emailAddress,\n        name: acc.name,\n        connected: new Date().toLocaleString(), // Use current time as fallback\n      })),\n    );\n\n    // Check if there are any Gmail accounts\n    const isConnected = gmailAccounts.length > 0;\n\n    return NextResponse.json({\n      isConnected,\n      count: gmailAccounts.length,\n      accounts: accountsWithTimestamp,\n    });\n  } catch (error) {\n    console.error(\"[GMAIL STATUS] Error checking Gmail accounts:\", error);\n    return NextResponse.json(\n      { error: \"Failed to check Gmail accounts\" },\n      { status: 500 },\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;;;;;AAEO,eAAe,uCAAC,GAAD;IACpB,IAAI;QACF,oEAAoE;QACpE,MAAM,UAAU,MAAM,CAAA,GAAA,qLAAA,CAAA,OAAI,AAAD;QACzB,MAAM,SAAS,QAAQ,MAAM;QAE7B,IAAI,CAAC,QAAQ;YACX,QAAQ,KAAK,CAAC;YACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,sCAAsC;QACtC,MAAM,gBAAgB,MAAM,qHAAA,CAAA,KAAE,CAAC,OAAO,CAAC,QAAQ,CAAC;YAC9C,OAAO;gBACL,QAAQ;gBACR,UAAU;YACZ;YACA,QAAQ;gBACN,IAAI;gBACJ,cAAc;gBACd,MAAM;YAER;QACF;QAEA,2CAA2C;QAC3C,MAAM,wBAAwB,cAAc,GAAG,CAAC,CAAC,MAAQ,CAAC;gBACxD,GAAG,GAAG;gBACN,WAAW,IAAI,OAAO,WAAW;YACnC,CAAC;QAED,QAAQ,GAAG,CACT,CAAC,qBAAqB,EAAE,cAAc,MAAM,CAAC,yBAAyB,EAAE,OAAO,CAAC,CAAC,EACjF,sBAAsB,GAAG,CAAC,CAAC,MAAQ,CAAC;gBAClC,OAAO,IAAI,YAAY;gBACvB,MAAM,IAAI,IAAI;gBACd,WAAW,IAAI,OAAO,cAAc;YACtC,CAAC;QAGH,wCAAwC;QACxC,MAAM,cAAc,cAAc,MAAM,GAAG;QAE3C,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB;YACA,OAAO,cAAc,MAAM;YAC3B,UAAU;QACZ;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iDAAiD;QAC/D,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAiC,GAC1C;YAAE,QAAQ;QAAI;IAElB;AACF;;;IAvDsB;;AAAA,iPAAA","debugId":null}}]
}